<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Museo Larco AR</title>
    <link rel="stylesheet" href="styles.css">
    
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://raw.githack.com/fcor/arjs-gestures/master/dist/gestures.js"></script>
</head>

<body style="margin: 0; overflow: hidden;">

    <div id="start-screen" class="overlay-screen">
        <h1>Museo Larco AR</h1>
        <p>Bienvenido a la gu√≠a interactiva.</p>
        <ul>
            <li>Permite el uso de la c√°mara.</li>
            <li>Apunta a las im√°genes de la exhibici√≥n.</li>
            <li>Descubre contenido exclusivo.</li>
        </ul>
        <button id="start-btn">INICIAR VISITA</button>
    </div>

    <div id="ar-ui" class="ui-container hidden">
        <div class="info-card">
            <h2 id="piece-title">Detectando...</h2>
            <p id="piece-desc">Escaneando pieza...</p>
            
            <div class="controls">
                <button id="audio-btn" class="btn-icon">üîä Escuchar Gu√≠a</button>
                <button id="fav-btn" class="btn-icon">‚≠ê Favorito</button>
            </div>
            <div id="subtitles" class="subtitles hidden"></div>
        </div>
    </div>

    <a-scene 
            embedded 
            arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3; patternRatio: 0.75;"
            renderer="logarithmicDepthBuffer: true; colorManagement: true;"
            vr-mode-ui="enabled: false"
            gesture-detector 
            id="scene">

            <a-light type="ambient" intensity="1"></a-light>
            <a-light type="directional" intensity="1.5" position="2 4 4"></a-light>

            <a-assets>
                <a-asset-item id="modelo-huaco" src="assets/models/huaco.glb"></a-asset-item>
                <a-asset-item id="modelo-felino" src="assets/models/felino.glb"></a-asset-item>
            </a-assets>

<a-marker 
            type="pattern" 
            url="assets/markers/huaco-retrato.patt" 
            raycaster="objects: .clickable" 
            emitevents="true" 
            cursor="fuse: false; rayOrigin: mouse;" 
            id="marker-huaco">
            
            <a-entity scale="1 1 1" rotation="0 0 0" position="0 0 0" class="clickable" gesture-handler>
                
                <a-sphere 
                    color="#8B4513" 
                    radius="0.5" 
                    position="0 0.5 0"
                    material="roughness: 0.8; src: url(assets/textura.jpg)"> </a-sphere>

                <a-sphere 
                    color="#F5DEB3" 
                    radius="0.35" 
                    position="0 0.5 0.25"
                    scale="1 1 0.5">
                </a-sphere>

                <a-torus 
                    color="#8B4513" 
                    radius="0.3" 
                    radius-tubular="0.05" 
                    arc="180"
                    rotation="0 90 0" 
                    position="0 0.9 0">
                </a-torus>

                <a-cylinder 
                    color="#8B4513" 
                    radius="0.08" 
                    height="0.3" 
                    position="0 1.15 0">
                </a-cylinder>

                <a-text 
                    value="Retrato Moche" 
                    align="center" 
                    position="0 1.5 0" 
                    scale="0.8 0.8 0.8"
                    color="white"
                    side="double">
                </a-text>
            </a-entity>

        </a-marker>

            <a-marker 
                type="pattern" 
                url="assets/markers/pattern-nariguera-de-oro.patt" 
                raycaster="objects: .clickable" 
                emitevents="true" 
                cursor="fuse: false; rayOrigin: mouse;" 
                id="marker-oro">
                
                <a-torus 
                    color="#FFD700" 
                    arc="280" 
                    radius="1.2" 
                    radius-tubular="0.15"
                    rotation="90 180 0" 
                    position="0 0.5 0"
                    material="metalness: 1; roughness: 0.2;"
                    class="clickable" 
                    gesture-handler>
                </a-torus>
            </a-marker>

            <a-marker 
                type="pattern" 
                url="assets/markers/felino.patt" 
                raycaster="objects: .clickable" 
                emitevents="true" 
                cursor="fuse: false; rayOrigin: mouse;" 
                id="marker-felino">
                
                <a-entity 
                    gltf-model="#modelo-felino" 
                    scale="0.5 0.5 0.5" 
                    position="0 0 0" 
                    class="clickable" 
                    gesture-handler>
                </a-entity>
            </a-marker>

            <a-entity camera></a-entity>
        </a-scene>

    <script src="script.js"></script>
</body>
</html>
