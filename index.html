<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Museo Larco AR</title>
    <link rel="stylesheet" href="styles.css">
    
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://raw.githack.com/fcor/arjs-gestures/master/dist/gestures.js"></script>
</head>

<body style="margin: 0; overflow: hidden;">

    <div id="start-screen" class="overlay-screen">
        <h1>Museo Larco AR</h1>
        <p>Bienvenido a la gu√≠a interactiva.</p>
        <ul>
            <li>Permite el uso de la c√°mara.</li>
            <li>Apunta a las im√°genes de la exhibici√≥n.</li>
            <li>Descubre contenido exclusivo.</li>
        </ul>
        <button id="start-btn">INICIAR VISITA</button>
    </div>

    <div id="ar-ui" class="ui-container hidden">
        <div class="info-card">
            <h2 id="piece-title">Detectando...</h2>
            <p id="piece-desc">Escaneando pieza...</p>
            
            <div class="controls">
                <button id="audio-btn" class="btn-icon">üîä Escuchar Gu√≠a</button>
                <button id="fav-btn" class="btn-icon">‚≠ê Favorito</button>
            </div>
            <div id="subtitles" class="subtitles hidden"></div>
        </div>
    </div>

    <a-scene 
        embedded 
        arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
        renderer="logarithmicDepthBuffer: true;"
        vr-mode-ui="enabled: false"
        gesture-detector 
        id="scene">

        <a-assets>
            <a-asset-item id="modelo-huaco" src="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Duck/glTF-Binary/Duck.glb"></a-asset-item>
        </a-assets>

        <a-marker 
            type="pattern" 
            url="assets/markers/huaco-retrato.patt" 
            raycaster="objects: .clickable" 
            emitevents="true" 
            cursor="fuse: false; rayOrigin: mouse;" 
            id="marker-huaco">
            <a-entity gltf-model="#modelo-huaco" scale="0.5 0.5 0.5" class="clickable" gesture-handler></a-entity>
        </a-marker>

        <a-marker 
            type="pattern" 
            url="assets/markers/pattern-nariguera-de-oro.patt" 
            raycaster="objects: .clickable" 
            emitevents="true" 
            cursor="fuse: false; rayOrigin: mouse;" 
            id="marker-oro">
            <a-box position="0 0.5 0" material="color: #FFD700; opacity: 0.9" animation="property: rotation; to: 0 360 0; loop: true; dur: 5000" class="clickable" gesture-handler></a-box>
        </a-marker>

        <a-marker 
            type="pattern" 
            url="assets/markers/felino.patt" 
            raycaster="objects: .clickable" 
            emitevents="true" 
            cursor="fuse: false; rayOrigin: mouse;" 
            id="marker-felino">
            <a-sphere position="0 0.5 0" radius="0.5" material="color: #CD5C5C; opacity: 0.9" class="clickable" gesture-handler></a-sphere>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>

    <script src="script.js"></script>
</body>
</html>